<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GeoAI LULC Analysis Dashboard</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- PAGE 1: YEAR SELECTION & DATA VALIDATION -->
    <div id="page1" class="page active">
        <div class="satellite-bg"></div>
        <div class="container">
            <header class="main-header">
                <div class="logo">
                    <i class="fas fa-satellite"></i>
                    <h1>GeoAI Land Use Classification System</h1>
                </div>
                <p class="subtitle">Automated Satellite Imagery Analysis for Land Cover Change Detection</p>
                <div class="year-detection-status">
                    <h3><i class="fas fa-folder-open"></i> Available Years Detected:</h3>
                    <div id="detected-years" class="detected-years-list">
                        <div class="detection-loading">
                            <i class="fas fa-spinner fa-spin"></i> Scanning project directories...
                        </div>
                    </div>
                </div>
            </header>

            <div class="selection-card">
                <div class="card-header">
                    <h2><i class="fas fa-calendar-alt"></i> Temporal Analysis Configuration</h2>
                    <p>Select two different time periods for land cover change analysis</p>
                </div>

                <div class="year-selection">
                    <div class="dropdown-group">
                        <label for="year1">Time Period 1 (Baseline)</label>
                        <select id="year1" class="year-dropdown">
                            <option value="">Select baseline year...</option>
                        </select>
                        <div id="year1-status" class="status-indicator"></div>
                    </div>

                    <div class="arrow-separator">
                        <i class="fas fa-arrow-right"></i>
                    </div>

                    <div class="dropdown-group">
                        <label for="year2">Time Period 2 (Comparison)</label>
                        <select id="year2" class="year-dropdown">
                            <option value="">Select comparison year...</option>
                        </select>
                        <div id="year2-status" class="status-indicator"></div>
                    </div>
                </div>

                <div id="validation-results" class="validation-panel hidden">
                    <h3><i class="fas fa-check-circle"></i> Data Validation Results</h3>
                    <div id="validation-content"></div>
                </div>

                <div id="error-message" class="error-panel hidden"></div>

                <div class="action-panel">
                    <button id="run-analysis" class="primary-btn" disabled>
                        <i class="fas fa-rocket"></i>
                        Run GeoAI Analysis
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- PROGRESS OVERLAY -->
    <div id="progress-overlay" class="progress-overlay hidden">
        <div class="progress-content">
            <div class="spinner"></div>
            <h2>Processing Satellite Imagery</h2>
            <p id="progress-text">Initializing GeoAI pipeline...</p>
            <div class="progress-steps">
                <div class="step" id="step1"><i class="fas fa-download"></i> Loading Data</div>
                <div class="step" id="step2"><i class="fas fa-cog"></i> Running Classification</div>
                <div class="step" id="step3"><i class="fas fa-search"></i> Computing Changes</div>
                <div class="step" id="step4"><i class="fas fa-chart-line"></i> Generating Results</div>
            </div>
        </div>
    </div>

    <!-- PAGE 2: ANALYTICS DASHBOARD -->
    <div id="page2" class="page">
        <nav class="dashboard-nav">
            <div class="nav-brand">
                <i class="fas fa-satellite"></i>
                <span>GeoAI Dashboard</span>
            </div>
            <div class="nav-actions">
                <button id="reset-analysis" class="secondary-btn">
                    <i class="fas fa-redo"></i> Analyze Different Years
                </button>
                <button id="download-report" class="primary-btn">
                    <i class="fas fa-download"></i> Download Report
                </button>
            </div>
        </nav>

        <div class="dashboard-container">
            <!-- EXECUTIVE SUMMARY -->
            <section class="summary-section">
                <h2><i class="fas fa-chart-bar"></i> Executive Summary</h2>
                <div class="metrics-grid">
                    <div class="metric-card confidence">
                        <div class="metric-icon"><i class="fas fa-bullseye"></i></div>
                        <div class="metric-content">
                            <h3 id="confidence-value">--</h3>
                            <p>Classification Confidence</p>
                            <small>Average model certainty</small>
                        </div>
                    </div>
                    <div class="metric-card reliability">
                        <div class="metric-icon"><i class="fas fa-shield-alt"></i></div>
                        <div class="metric-content">
                            <h3 id="reliability-value">--</h3>
                            <p>Reliability Score</p>
                            <small>Data quality assessment</small>
                        </div>
                    </div>
                    <div class="metric-card change">
                        <div class="metric-icon"><i class="fas fa-exchange-alt"></i></div>
                        <div class="metric-content">
                            <h3 id="change-value">--</h3>
                            <p>Area Changed</p>
                            <small>Significant transitions</small>
                        </div>
                    </div>
                    <div class="metric-card transitions">
                        <div class="metric-icon"><i class="fas fa-random"></i></div>
                        <div class="metric-content">
                            <h3 id="transitions-value">--</h3>
                            <p>Major Transitions</p>
                            <small>Land use changes detected</small>
                        </div>
                    </div>
                </div>
            </section>

            <!-- PIXEL-LEVEL STATISTICS PANEL -->
            <section class="dashboard-section">
                <div class="section-header">
                    <h2><i class="fas fa-chart-bar"></i> Pixel-Level Analytics</h2>
                    <p>Detailed pixel-based classification statistics</p>
                </div>
                <div class="pixel-stats-container">
                    <div class="pixel-summary-cards">
                        <div class="pixel-card">
                            <h3>Total Pixels Processed</h3>
                            <div class="pixel-value" id="total-pixels-t1">0</div>
                            <span class="pixel-label">Time 1</span>
                        </div>
                        <div class="pixel-card">
                            <h3>Total Pixels Processed</h3>
                            <div class="pixel-value" id="total-pixels-t2">0</div>
                            <span class="pixel-label">Time 2</span>
                        </div>
                        <div class="pixel-card">
                            <h3>Changed Pixels</h3>
                            <div class="pixel-value" id="changed-pixels">0</div>
                            <span class="pixel-label">Total Changes</span>
                        </div>
                    </div>
                    <div class="pixel-stats-table">
                        <table class="statistics-table">
                            <thead>
                                <tr>
                                    <th>LULC Class</th>
                                    <th>Pixels (T1)</th>
                                    <th>Pixels (T2)</th>
                                    <th>% of Total (T1)</th>
                                    <th>% of Total (T2)</th>
                                    <th>Pixel Change</th>
                                    <th>% Change</th>
                                </tr>
                            </thead>
                            <tbody id="pixel-statistics-tbody">
                                <!-- Populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- CLASS-TO-CLASS TRANSITION VISUALIZATION -->
            <section class="dashboard-section">
                <div class="section-header">
                    <h2><i class="fas fa-exchange-alt"></i> Land Use Transitions</h2>
                    <p>Interactive visualization of class-to-class changes</p>
                </div>
                <div class="transition-controls">
                    <div class="filter-section">
                        <h3>Transition Filters:</h3>
                        <div class="transition-filters">
                            <label class="filter-checkbox">
                                <input type="checkbox" id="filter-forest-buildup" checked>
                                <span class="legend-color forest"></span>
                                Forest → Built-up
                            </label>
                            <label class="filter-checkbox">
                                <input type="checkbox" id="filter-forest-water" checked>
                                <span class="legend-color forest"></span>
                                Forest → Water
                            </label>
                            <label class="filter-checkbox">
                                <input type="checkbox" id="filter-water-buildup" checked>
                                <span class="legend-color water"></span>
                                Water → Built-up
                            </label>
                            <label class="filter-checkbox">
                                <input type="checkbox" id="filter-agriculture-buildup" checked>
                                <span class="legend-color agriculture"></span>
                                Agriculture → Built-up
                            </label>
                            <label class="filter-checkbox">
                                <input type="checkbox" id="filter-barren-buildup" checked>
                                <span class="legend-color barren"></span>
                                Barren → Built-up
                            </label>
                        </div>
                    </div>
                </div>
                <div class="transition-charts">
                    <div class="chart-container">
                        <h3>Transition Areas (Hectares)</h3>
                        <canvas id="transitionBarChart"></canvas>
                    </div>
                    <div class="chart-container">
                        <h3>Major Transition Proportions</h3>
                        <canvas id="transitionPieChart"></canvas>
                    </div>
                </div>
            </section>

            <!-- PROBABILITY & CONFIDENCE VISUALIZATION -->
            <section class="dashboard-section">
                <div class="section-header">
                    <h2><i class="fas fa-chart-line"></i> Probability & Reliability Assessment</h2>
                    <p>Classification confidence and probability distribution analysis</p>
                </div>
                <div class="confidence-container">
                    <div class="confidence-summary">
                        <div class="confidence-metric">
                            <h3>Mean Probability Score</h3>
                            <div class="confidence-value" id="mean-probability">0.86</div>
                            <div class="confidence-bar">
                                <div class="confidence-fill" id="confidence-bar-fill"></div>
                            </div>
                        </div>
                        <div class="confidence-distribution">
                            <h3>Confidence Distribution</h3>
                            <canvas id="confidenceHistogram"></canvas>
                        </div>
                    </div>
                </div>
            </section>

            <!-- MAIN CONTENT AREA -->
            <div class="main-content">
                <!-- MAP PANEL -->
                <section class="map-section">
                    <div class="panel-header">
                        <h3><i class="fas fa-map"></i> Interactive Land Cover Map</h3>
                        <div class="map-controls">
                            <h4>Pixel-wise Layer Controls:</h4>
                            <div class="layer-toggles">
                                <label class="toggle-switch" data-tooltip="Show/hide Time 1 LULC classification at pixel level">
                                    <input type="checkbox" id="layer-t1" checked>
                                    <span class="slider"></span>
                                    <span class="legend-color forest"></span>
                                    <span class="label">Pixel-level LULC (T1)</span>
                                </label>
                                <label class="toggle-switch" data-tooltip="Show/hide Time 2 LULC classification at pixel level">
                                    <input type="checkbox" id="layer-t2">
                                    <span class="slider"></span>
                                    <span class="legend-color buildup"></span>
                                    <span class="label">Pixel-level LULC (T2)</span>
                                </label>
                                <label class="toggle-switch" data-tooltip="Show/hide pixel-level change detection results">
                                    <input type="checkbox" id="layer-change">
                                    <span class="slider"></span>
                                    <span class="legend-color change"></span>
                                    <span class="label">Pixel-level Change Map</span>
                                </label>
                                <label class="toggle-switch" data-tooltip="Show/hide pixel-level probability confidence heatmap">
                                    <input type="checkbox" id="layer-confidence">
                                    <span class="slider"></span>
                                    <span class="legend-color confidence"></span>
                                    <span class="label">Pixel-level Probability Map</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <div id="map" class="map-container"></div>
                    <div class="map-legend">
                        <h4>Land Cover Classes</h4>
                        <div class="legend-items">
                            <div class="legend-item">
                                <span class="legend-color forest"></span>
                                <span>Forest</span>
                            </div>
                            <div class="legend-item">
                                <span class="legend-color water"></span>
                                <span>Water Bodies</span>
                            </div>
                            <div class="legend-item">
                                <span class="legend-color agriculture"></span>
                                <span>Agriculture</span>
                            </div>
                            <div class="legend-item">
                                <span class="legend-color barren"></span>
                                <span>Barren Land</span>
                            </div>
                            <div class="legend-item">
                                <span class="legend-color buildup"></span>
                                <span>Built-up</span>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- SIDEBAR -->
                <aside class="sidebar">
                    <!-- FILTERS -->
                    <section class="filter-section">
                        <h3><i class="fas fa-filter"></i> Analysis Filters</h3>
                        <div class="filter-options">
                            <label class="filter-checkbox">
                                <input type="checkbox" id="filter-agriculture">
                                <span class="checkmark"></span>
                                Show Agriculture Changes
                            </label>
                            <label class="filter-checkbox">
                                <input type="checkbox" id="filter-water">
                                <span class="checkmark"></span>
                                Show Water Body Changes
                            </label>
                            <label class="filter-checkbox">
                                <input type="checkbox" id="filter-buildup">
                                <span class="checkmark"></span>
                                Show Built-up Expansion
                            </label>
                            <label class="filter-checkbox">
                                <input type="checkbox" id="filter-forest">
                                <span class="checkmark"></span>
                                Show Forest Changes
                            </label>
                        </div>
                    </section>

                    <!-- GROWTH INDICATORS -->
                    <section class="growth-section">
                        <h3><i class="fas fa-chart-line"></i> Growth Indicators</h3>
                        <div class="indicator-cards">
                            <div class="indicator-card buildup-growth">
                                <div class="indicator-header">
                                    <i class="fas fa-building"></i>
                                    <span>Urban Expansion</span>
                                </div>
                                <div class="indicator-value">
                                    <span id="buildup-change">--</span>
                                    <span class="indicator-trend" id="buildup-trend"></span>
                                </div>
                                <div class="indicator-details">
                                    <div>Area: <span id="buildup-area">--</span> ha</div>
                                    <div>Annual: <span id="buildup-annual">--</span>%</div>
                                </div>
                            </div>
                            <div class="indicator-card vegetation-loss">
                                <div class="indicator-header">
                                    <i class="fas fa-leaf"></i>
                                    <span>Vegetation Change</span>
                                </div>
                                <div class="indicator-value">
                                    <span id="vegetation-change">--</span>
                                    <span class="indicator-trend" id="vegetation-trend"></span>
                                </div>
                                <div class="indicator-details">
                                    <div>Area: <span id="vegetation-area">--</span> ha</div>
                                    <div>Change: <span id="vegetation-percent">--</span>%</div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- POLICY INSIGHTS -->
                    <section class="insights-section">
                        <h3><i class="fas fa-lightbulb"></i> Policy Insights</h3>
                        <div id="policy-insights" class="insights-content">
                            <div class="insight-item">
                                <i class="fas fa-info-circle"></i>
                                <span>Analysis in progress...</span>
                            </div>
                        </div>
                    </section>
                </aside>
            </div>

            <!-- STATISTICS TABLE -->
            <section class="statistics-section">
                <div class="panel-header">
                    <h3><i class="fas fa-table"></i> Spatial Statistics Summary</h3>
                    <button id="download-csv" class="secondary-btn">
                        <i class="fas fa-download"></i> Download CSV
                    </button>
                </div>
                <div class="table-container">
                    <table id="statistics-table" class="statistics-table">
                        <thead>
                            <tr>
                                <th>Land Cover</th>
                                <th>Area T1 (ha)</th>
                                <th>Area T2 (ha)</th>
                                <th>% of District</th>
                                <th>Change (ha)</th>
                                <th>Change (%)</th>
                            </tr>
                        </thead>
                        <tbody id="statistics-tbody">
                            <!-- Dynamic content -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- TRANSITION MATRIX -->
            <section class="transition-section">
                <h3><i class="fas fa-project-diagram"></i> Land Use Transition Matrix</h3>
                <div class="transition-container">
                    <div id="transition-matrix" class="transition-matrix">
                        <!-- Dynamic content -->
                    </div>
                </div>
            </section>

            <!-- SUSTAINABILITY REPORT -->
            <section class="sustainability-section">
                <h3><i class="fas fa-leaf"></i> Sustainability Assessment</h3>
                <div class="sustainability-cards">
                    <div class="sdg-card">
                        <div class="sdg-header">
                            <i class="fas fa-city"></i>
                            <span>SDG-11: Sustainable Cities</span>
                        </div>
                        <div id="sdg11-content" class="sdg-content">
                            <p>Urban growth analysis in progress...</p>
                        </div>
                    </div>
                    <div class="sdg-card">
                        <div class="sdg-header">
                            <i class="fas fa-tree"></i>
                            <span>SDG-15: Life on Land</span>
                        </div>
                        <div id="sdg15-content" class="sdg-content">
                            <p>Forest conservation assessment in progress...</p>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="app.js"></script>
</body>
</html>